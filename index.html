<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Money Tracker</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.25/jspdf.plugin.autotable.min.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f4f4f9;
      margin: 0;
      padding: 0;
      min-height: 100vh;
      overflow-x: hidden; 
    }
    header {
      width: 100%;
      background: #222;
      color: #fff;
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: fixed;
      top: 0;
      left: 0;
      z-index: 1000;
      height: 50px;
      box-sizing: border-box; 
    }
    .logo {
      font-size: 1.5rem;
      font-weight: bold;
      margin-left: 15px;
    }
    .nav-links {
      display: flex;
      align-items: center;
      height: 100%;
    }
    .nav-links a {
      color: #fff;
      margin: 0 12px;
      text-decoration: none;
      font-size: 1rem;
      line-height: 50px;
    }
    .nav-links a:hover {
      color: #90caf9;
      text-decoration: none;
    }
    .nav-icons {
      margin-right: 15px;
      display: flex;
      align-items: center;
    }
    .container {
      width: 100%;
      min-height: calc(100vh - 90px);  
      padding: 60px 20px 50px 20px;    
      background: #90caf9;
      box-sizing: border-box;
    }
    h1, h2, h3 {
      text-align: center;
      margin: 10px 0;
    }
    .form {
      display: flex;
      flex-direction: column;
      margin-bottom: 20px;
    }
    .form input, .form button, .form select {
      margin: 5px 0;
      padding: 10px;
      font-size: 16px;
    }
    ul {
      list-style: none;
      padding: 0;
      margin: 0;
    }
    li {
      padding: 10px;
      margin: 5px 0;
      background: #f1f1f1;
      border-left: 5px solid;
    }
    li.income {
      border-color: green;
    }
    li.expense {
      border-color: red;
    }
    #clear-btn, #toggleChartBtn, #pdf-btn, .action-btn {
      margin: 10px;
      padding: 10px 20px;
      background-color: #ff4d4d;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-weight: bold;
      transition: 0.3s ease;
    }
    #clear-btn:hover, #toggleChartBtn:hover, #pdf-btn:hover, .action-btn:hover {
      background-color: #e60000;
      transform: scale(1.05);
    }
    .button-container {
      display: flex;
      justify-content: center; 
      gap: 15px; 
      margin: 20px 0;
      flex-wrap: wrap; 
    }
    .button-container button {
      flex: 1; 
      max-width: 180px; 
    }
    .edit-btn, .delete-btn {
      margin-left: 10px;
      border: none;
      padding: 5px 8px;
      cursor: pointer;
      border-radius: 4px;
      font-size: 14px;
    }
    .edit-btn {
      background: rgb(41, 193, 41);
      color: white;
    }
    .delete-btn {
      background: red;
      color: white;
    }
    .transaction-main {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .transaction-actions {
      display: flex;
      gap: 8px;
    }
    .date {
      font-size: 12px;
      color: #555;
      margin-top: 4px;
      margin-left: 2px;
    }
    #chartContainer {
      display: none;
      margin-top: 20px;
    }
    .search-container {
      text-align: center;
      margin: 20px 0;
    }
    #searchInput {
      width: 60%;
      max-width: 500px;
      padding: 10px;
      border: 2px solid #007bff;
      border-radius: 8px;
      font-size: 16px;
    }
    footer {
      background: #222;
      color: #fff;
      text-align: center;
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      z-index: 1000;
      height: 40px;
      line-height: 40px;
    }
    @media (max-width: 600px) {
      .nav-links {
        display: none; 
      }
      .desktop-only {
        display: none; 
      }
      .container {
        width: 100%;
        padding: 60px 10px 50px; 
      }
    }
    .sidebar {
      position: fixed;
      top: 0;
      right: 0;
      height: 100%;
      width: 250px;
      background: #222;
      color: white;
      padding: 20px;
      transform: translateX(100%);   
      transition: transform 0.3s ease-in-out;
      box-shadow: -3px 0 5px rgba(0,0,0,0.3);
      z-index: 1001;  
    }
    .sidebar.active {
      transform: translateX(0);
    }
    .sidebar h2 {
      margin-top: 0;
    }
    .sidebar ul {
      list-style: none;
      padding: 0;
    }
    .sidebar ul li {
      margin: 15px 0;
    }
    .sidebar ul li a {
      color: white;
      text-decoration: none;
    }
    .sidebar li {
      padding: 15px;
      border-bottom: 1px solid black;
      background: black;   
      cursor: pointer;
    }
    #close-sidebar {
      background: none;
      border: none;
      font-size: 24px;
      color: white;
      float: right;
      cursor: pointer;
    }
    #settings-btn {
      background: none;
      border: none;
      font-size: 16px;
      cursor: pointer;
      color: white; 
    }
  </style>
</head>
<body>
  <header>
    <div class="logo"> Money Tracker</div>
    <nav class="nav-links">
      <a href="#">Home</a>
      <a href="#type">Transactions</a>
      <a href="#transactions">Income vs Expense Chart</a>
      <a href="#transactions">Export to pdf</a>
    </nav>
    <div class="nav-icons">
      <button id="settings-btn">Settings</button>
    </div>
  </header>
  <div class="container">
    <h1>Money Tracker</h1>
    <h2 id="balance">Current Balance: $0</h2>
    <h3 id="income">Total Income: $0</h3>
    <h3 id="expense">Total Expense: $0</h3>
    <div class="form">
      <input type="text" id="desc" placeholder="Enter description">
      <label for="category">Category:</label>
      <select id="category">
        <option value="Food">Food</option>
        <option value="Travel">Travel</option>
        <option value="Shopping">Shopping</option>
        <option value="Bills">Bills</option>
        <option value="Salary">Salary</option>
        <option value="Other">Other</option>
      </select>
      <select id="type">
        <option value="income">Income</option>
        <option value="expense">Expense</option>
      </select>
      <input type="number" id="amount" placeholder="Enter amount">
      <button onclick="addTransaction()">Add</button>
    </div>
    <div class="search-container">
      <input type="text" id="searchInput" placeholder="Search here...">
    </div>
    <h3>Transaction History</h3>
    <ul id="transactions"></ul>
    <div class="button-container">
      <button id="clear-btn" onclick="clearTransactions()">Clear All Transactions</button>
      <button class="action-btn" onclick="saveData()">Save Data</button>
      <button class="action-btn" onclick="loadData()">Load Data</button>
    <button id="pdf-btn" onclick="exportToPDF()">Export to PDF</button>
    <button id="toggleChartBtn">Show Income vs Expense Chart</button>
    </div>
    <div id="chartContainer">
      <canvas id="incomeExpenseChart"></canvas>
    </div>
  </div>
  <div id="settings-sidebar" class="sidebar">
    <button id="close-sidebar">&times;</button>
    <h2>Settings</h2>
    <ul id="sidebar-menu">
      <li class="desktop-only"><a href="#">Profile</a></li>
      <li class="desktop-only"><a href="#">Theme</a></li>
      <li class="desktop-only"><a href="#">Notifications</a></li>
      <li class="desktop-only"><a href="#">Logout</a></li>
    </ul>
  </div>
  <footer>
    <p>Â© 2025 Money Tracker</p>
  </footer>
<script>
  let balance = 0;
  let transactions = [];
  let editIndex = null; 
  let chartInstance = null;
  function addTransaction() {
    const desc = document.getElementById("desc").value;
    const type = document.getElementById("type").value;
    const amount = Number(document.getElementById("amount").value);
    const category = document.getElementById("category").value;
    if (desc === "" || amount <= 0) {
      alert("Please enter valid data!");
      return;
    }
    const finalAmount = type === "income" ? amount : -amount;
    if (editIndex !== null) {
      const old = transactions[editIndex];
      balance -= old.amount; 
      transactions[editIndex] = { desc, amount: finalAmount, category, date: old.date };
      balance += finalAmount;
      editIndex = null; 
    } else {
      const transaction = { desc, amount: finalAmount, category, date: new Date().toLocaleString() };
      transactions.push(transaction);
      balance += finalAmount;
    }
    updateUI();
    document.getElementById("desc").value = "";
    document.getElementById("amount").value = "";
    document.getElementById("category").value = "Other";
  }
  function updateUI() {
    document.getElementById("balance").innerText = `Balance: $${balance}`;
    let income = transactions
      .filter(t => t.amount > 0)
      .reduce((acc, t) => acc + t.amount, 0);
    let expense = transactions
      .filter(t => t.amount < 0)
      .reduce((acc, t) => acc + Math.abs(t.amount), 0);
    document.getElementById("income").innerText = `Total Income: $${income}`;
    document.getElementById("expense").innerText = `Total Expense: $${expense}`;
    const list = document.getElementById("transactions");
    list.innerHTML = "";
    transactions.forEach((t, index) => {
      const li = document.createElement("li");
      li.innerHTML = `
        <div class="transaction-main">
          <span>${t.desc} (${t.category}): $${t.amount}</span>
          <div class="transaction-actions">
            <button class="edit-btn" onclick="editTransaction(${index})">Edit</button>
            <button class="delete-btn" onclick="deleteTransaction(${index})">Delete</button>
          </div>
        </div>
        <div class="date">${t.date}</div>
      `;
      li.classList.add(t.amount > 0 ? "income" : "expense");
      list.appendChild(li);
    });
    if (document.getElementById("chartContainer").style.display === "block") {
      renderChart(); 
    }
  }
  function editTransaction(index) {
    const t = transactions[index];
    document.getElementById("desc").value = t.desc;
    document.getElementById("amount").value = Math.abs(t.amount);
    document.getElementById("category").value = t.category;
    document.getElementById("type").value = t.amount > 0 ? "income" : "expense";
    editIndex = index; 
  }
  function deleteTransaction(index) {
    balance -= transactions[index].amount; 
    transactions.splice(index, 1);
    updateUI();
  }
  function clearTransactions() {
    if (confirm("Are you sure you want to delete all transactions?")) {
      transactions = [];
      balance = 0;
      updateUI();
    }
  }
  document.getElementById("toggleChartBtn").addEventListener("click", () => {
    const chartContainer = document.getElementById("chartContainer");
    if (chartContainer.style.display === "none") {
      chartContainer.style.display = "block";
      document.getElementById("toggleChartBtn").textContent = "Hide Income vs Expense Chart";
      renderChart();
    } else {
      chartContainer.style.display = "none";
      document.getElementById("toggleChartBtn").textContent = "Show Income vs Expense Chart";
    }
  });
  function renderChart() {
    const ctx = document.getElementById("incomeExpenseChart").getContext("2d");
    let income = 0, expense = 0;
    transactions.forEach(t => {
      if (t.amount > 0) income += t.amount;
      else expense += Math.abs(t.amount);
    });
    if (chartInstance) {
      chartInstance.destroy();
    }
    chartInstance = new Chart(ctx, {
      type: "bar",
      data: {
        labels: ["Income", "Expense"],
        datasets: [{
          label: "Amount",
          data: [income, expense],
          backgroundColor: ["#4caf50", "#f44336"]
        }]
      },
      options: {
        responsive: true,
        plugins: {
          legend: { display: false },
          title: { display: true, text: "Income vs Expense" }
        }
      }
    });
  }
  async function exportToPDF() {
    if (transactions.length === 0) {
        alert("No transactions to export!");
        return;
    }
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();
    doc.setFontSize(18);
    doc.text("Transaction Report", doc.internal.pageSize.getWidth() / 2, 20, { align: "center" });
    let income = transactions.filter(t => t.amount > 0).reduce((a, b) => a + b.amount, 0);
    let expense = transactions.filter(t => t.amount < 0).reduce((a, b) => a + Math.abs(b.amount), 0);
    doc.setFontSize(12);
    doc.text(`Balance: $${balance}`, 14, 25);
    doc.text(`Total Income: $${income}`, 14, 32);
    doc.text(`Total Expense: $${expense}`, 14, 39);
    const tableColumn = ["Date & Time", "Description", "Category", "Type", "Amount"];
    const tableRows = [];
    transactions.forEach(t => {
        const row = [
            t.date,
            t.desc,
            t.category,
            t.amount > 0 ? "Income" : "Expense",
            "$" + Math.abs(t.amount)
        ];
        tableRows.push(row);
    });
    doc.autoTable({
        head: [tableColumn],
        body: tableRows,
        startY: 50,
        theme: "grid",
        headStyles: { fillColor: [41, 128, 185] }, 
        styles: { fontSize: 10, cellPadding: 3 }
    });
    doc.save("transactions.pdf");
  }
  document.addEventListener("DOMContentLoaded", () => {
    const searchInput = document.getElementById("searchInput");
    const noResults = document.createElement("p");
    noResults.textContent = "No such transaction exists in the history.";
    noResults.style.display = "none"; 
    noResults.style.textAlign = "center";
    noResults.style.color = "red";
    noResults.id = "noResultsMessage";
    const transactionsList = document.getElementById("transactions");
    transactionsList.parentNode.insertBefore(noResults, transactionsList.nextSibling);
    searchInput.addEventListener("input", function () {
      let searchValue = this.value.toLowerCase();
      let items = document.querySelectorAll("#transactions li");
      let anyVisible = false;
      items.forEach(item => {
        let itemText = item.textContent.toLowerCase();
        if (itemText.includes(searchValue)) {
          item.style.display = "";
          anyVisible = true;
        } else {
          item.style.display = "none";
        }
      });
      noResults.style.display = anyVisible ? "none" : "block";
    });
  });
  const sidebar = document.getElementById('settings-sidebar');
  const settingsBtn = document.getElementById('settings-btn');
  const closeBtn = document.getElementById('close-sidebar');
  settingsBtn.addEventListener('click', () => {
    sidebar.classList.add('active');
  });
  closeBtn.addEventListener('click', () => {
    sidebar.classList.remove('active');
  });
  function setupSidebarMenu() {
    const sidebarMenu = document.getElementById("sidebar-menu");
    if (window.innerWidth <= 600) {
      sidebarMenu.innerHTML = `
        <li><a href="#">Home</a></li>
        <li><a href="#type">Transactions</a></li>
        <li><a href="#chartContainer">Income vs Expense Chart</a></li>
        <li><a href="#" onclick="exportToPDF()">Export to PDF</a></li>
        <li><a href="#">Profile</a></li>
        <li><a href="#">Theme</a></li>
        <li><a href="#">Notifications</a></li>
        <li><a href="#">Logout</a></li>
      `;
    } else {
      sidebarMenu.innerHTML = `
        <li><a href="#">Profile</a></li>
        <li><a href="#">Theme</a></li>
        <li><a href="#">Notifications</a></li>
        <li><a href="#">Logout</a></li>
      `;
    }
  }
  window.addEventListener("resize", setupSidebarMenu);
  window.addEventListener("DOMContentLoaded", setupSidebarMenu);
  function saveData() {
    localStorage.setItem("transactions", JSON.stringify(transactions));
    alert("Data saved successfully!");
  }
  function loadData() {
    const savedData = localStorage.getItem("transactions");
    if (savedData) {
      transactions = JSON.parse(savedData);
      updateUI(); 
      alert("Data loaded successfully!");
    } else {
      alert("No saved data found.");
    }
  }
</script>
</body>
</html>